<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:FishLevelEditor2.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:FishLevelEditor2.Views"
        xmlns:controls="clr-namespace:FishLevelEditor2.Controls"
        mc:Ignorable="d" d:DesignWidth="1600" d:DesignHeight="900"
        Width="1600" Height="900"
        x:Class="FishLevelEditor2.Views.MainWindow"
        Icon="/Assets/fish.ico"
        CanResize="False"
        Title="Fish Level Editor v2.0.0">
  <Design.DataContext>
    <vm:MainViewModel/>
  </Design.DataContext>
  <Window.Resources>
    <StreamGeometry x:Key="delete_regular">M24,7.25 C27.1017853,7.25 29.629937,9.70601719 29.7458479,12.7794443 L29.75,13 L37,13 C37.6903559,13 38.25,13.5596441 38.25,14.25 C38.25,14.8972087 37.7581253,15.4295339 37.1278052,15.4935464 L37,15.5 L35.909,15.5 L34.2058308,38.0698451 C34.0385226,40.2866784 32.1910211,42 29.9678833,42 L18.0321167,42 C15.8089789,42 13.9614774,40.2866784 13.7941692,38.0698451 L12.09,15.5 L11,15.5 C10.3527913,15.5 9.8204661,15.0081253 9.75645361,14.3778052 L9.75,14.25 C9.75,13.6027913 10.2418747,13.0704661 10.8721948,13.0064536 L11,13 L18.25,13 C18.25,9.82436269 20.8243627,7.25 24,7.25 Z M33.4021054,15.5 L14.5978946,15.5 L16.2870795,37.8817009 C16.3559711,38.7945146 17.116707,39.5 18.0321167,39.5 L29.9678833,39.5 C30.883293,39.5 31.6440289,38.7945146 31.7129205,37.8817009 L33.4021054,15.5 Z M27.25,20.75 C27.8972087,20.75 28.4295339,21.2418747 28.4935464,21.8721948 L28.5,22 L28.5,33 C28.5,33.6903559 27.9403559,34.25 27.25,34.25 C26.6027913,34.25 26.0704661,33.7581253 26.0064536,33.1278052 L26,33 L26,22 C26,21.3096441 26.5596441,20.75 27.25,20.75 Z M20.75,20.75 C21.3972087,20.75 21.9295339,21.2418747 21.9935464,21.8721948 L22,22 L22,33 C22,33.6903559 21.4403559,34.25 20.75,34.25 C20.1027913,34.25 19.5704661,33.7581253 19.5064536,33.1278052 L19.5,33 L19.5,22 C19.5,21.3096441 20.0596441,20.75 20.75,20.75 Z M24,9.75 C22.2669685,9.75 20.8507541,11.1064548 20.7551448,12.8155761 L20.75,13 L27.25,13 C27.25,11.2050746 25.7949254,9.75 24,9.75 Z</StreamGeometry>
    <StreamGeometry x:Key="arrow_undo_regular">M4.75,1.99981721 C5.12969577,1.99981721 5.44349096,2.28197109 5.49315338,2.64804665 L5.5,2.74981721 L5.5,8.43981721 L10.0743393,3.87995431 C12.516285,1.43800869 16.4384555,1.37844904 18.9526072,3.70127537 L19.1384834,3.87995431 C21.6414777,6.38294858 21.6414777,10.4411041 19.1384834,12.9440984 L10.2933472,21.7832698 L10.2933472,21.7832698 C10.0003251,22.0760341 9.52558023,22.0756964 9.23268704,21.7828032 C8.93979385,21.48991 8.9401317,21.0149074 9.23315376,20.7221431 L18.0778232,11.8834382 L18.0778232,11.8834382 C19.9950311,9.96623037 19.9950311,6.85782231 18.0778232,4.94061449 C16.2187126,3.08150387 13.2395019,3.02516718 11.3118079,4.77230194 L11.1342335,4.94137945 L6.562,9.49981721 L12.25,9.5 C12.6296958,9.5 12.943491,9.78215388 12.9931534,10.1482294 L13,10.25 C13,10.6296958 12.7178461,10.943491 12.3517706,10.9931534 L12.25,11 L4.75,11 C4.37030423,11 4.05650904,10.7178461 4.00684662,10.3517706 L4,10.25 L4,2.74981721 C4,2.33560365 4.33578644,1.99981721 4.75,1.99981721 Z</StreamGeometry>
  </Window.Resources>
  <DockPanel>
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="80*"/>
        <ColumnDefinition Width="20*"/>
      </Grid.ColumnDefinitions>
      <Grid.RowDefinitions>
        <RowDefinition Height="20"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="20"/>
      </Grid.RowDefinitions>

      <Menu Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" >
        <MenuItem Header="File">
          <MenuItem Header="Change Level"></MenuItem>
          <Separator/>
          <MenuItem HotKey="Ctrl+S" Header="Save" x:CompileBindings="False" Command="{Binding SaveCommand}"></MenuItem>
          <MenuItem HotKey="Ctrl+Shift+S" Header="Save as..." x:CompileBindings="False" Command="{Binding SaveAsCommand}"></MenuItem>
          <Separator/>
          <MenuItem HotKey="Ctrl+E" Header="Export level..." x:CompileBindings="False" Command="{Binding ExportCommand}"></MenuItem>
          <Separator/>
          <MenuItem Header="Preferences..." x:CompileBindings="False" Command="{Binding PreferencesCommand}"></MenuItem>
          <Separator/>
          <MenuItem Header="Exit" x:CompileBindings="False" Command="{Binding ExitCommand}"></MenuItem>
        </MenuItem>
        <MenuItem HotKey="Ctrl+Z" x:CompileBindings="False" Command="{Binding UndoCommand}">
          <MenuItem.Header>
            <PathIcon Height="10" Width="10" Data="{StaticResource arrow_undo_regular}"/>
          </MenuItem.Header>
        </MenuItem>
        <MenuItem FlowDirection="RightToLeft" HotKey="Ctrl+Y" x:CompileBindings="False" Command="{Binding RedoCommand}">
          <MenuItem.Header>
            <PathIcon Height="10" Width="10" Data="{StaticResource arrow_undo_regular}"/>
          </MenuItem.Header>
        </MenuItem>
      </Menu>
      <ScrollViewer Grid.ColumnSpan="1" Grid.Column="0" Grid.Row="1" Focusable="True" KeyDown="LevelScrollViewer_KeyDown" KeyUp="LevelScrollViewer_KeyUp" Background="LightGray" Name="LevelScrollViewer">
        <Grid Margin="32">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"></ColumnDefinition>
            <ColumnDefinition Width="Auto"></ColumnDefinition>
            <ColumnDefinition Width="Auto"></ColumnDefinition>
          </Grid.ColumnDefinitions>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
          </Grid.RowDefinitions>
          <Button Click="AddRowAboveButton_Click" Grid.Column="1" Grid.Row="0" Name="AddRowAboveButton" Content="+"/>
          <Button Click="AddColumnLeftButton_Click" Grid.Column="0" Grid.Row="1" Name="AddColumnLeftButton" Content="+"/>
          <controls:LevelViewControl PointerPressed="MainLevelBitmap_PointerPressed" PointerMoved="MainLevelBitmap_PointerMoved" Grid.Column="1" Grid.Row="1" Name="MainLevelBitmap"/>
          <Button Click="AddColumnRightButton_Click" Grid.Column="2" Grid.Row="1" Name="AddColumnRightButton" Content="+"/>
          <Button Click="AddRowBelowButton_Click" Grid.Column="1" Grid.Row="2" Name="AddRowBelowButton" Content="+"/>
        </Grid>
      </ScrollViewer>
      <DockPanel Grid.Column="1" Grid.Row="1">
        <TabControl Name="EditorTabs">
          <TabItem Header="Metatiles">
            <StackPanel>
              <!--Master Palette-->
              <HeaderedContentControl Header="Master Palette">
                <StackPanel>
                  <SKBitmapControl PointerPressed="MasterPaletteBitmap_PointerPressed" Height="64" Width="256" Name="MasterPaletteBitmap"/>
                </StackPanel>
              </HeaderedContentControl>
              <!--Palettes-->
              <HeaderedContentControl Header="Level Palettes">
                <Grid Width="240">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                  </Grid.ColumnDefinitions>
                  <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                  </Grid.RowDefinitions>
                  <DockPanel Width="80" Grid.Column="0" Grid.Row="0">
                    <Label HorizontalAlignment="Left">0: </Label>
                    <SKBitmapControl DataContext="0" PointerPressed="PaletteBitmap_PointerPressed" HorizontalAlignment="Right" Height="16" Width="64" Name="Palette0Bitmap"/>
                  </DockPanel>
                  <DockPanel Width="80" Grid.Column="1" Grid.Row="0">
                    <Label HorizontalAlignment="Left">1: </Label>
                    <SKBitmapControl DataContext="1" PointerPressed="PaletteBitmap_PointerPressed" HorizontalAlignment="Right" Height="16" Width="64" Name="Palette1Bitmap"/>
                  </DockPanel>
                  <DockPanel Width="80" Grid.Column="0" Grid.Row="1">
                    <Label HorizontalAlignment="Left">2: </Label>
                    <SKBitmapControl DataContext="2" PointerPressed="PaletteBitmap_PointerPressed" HorizontalAlignment="Right" Height="16" Width="64" Name="Palette2Bitmap"/>
                  </DockPanel>
                  <DockPanel Width="80" Grid.Column="1" Grid.Row="1">
                    <Label HorizontalAlignment="Left">3: </Label>
                    <SKBitmapControl DataContext="3" PointerPressed="PaletteBitmap_PointerPressed" HorizontalAlignment="Right" Height="16" Width="64" Name="Palette3Bitmap"/>
                  </DockPanel>
                </Grid>
              </HeaderedContentControl>
              <!--Metatile Set-->
              <HeaderedContentControl Header="Metatile list">
                <StackPanel>
                  <ScrollViewer Name="MetatileListScrollViewer" Height="256">
                    <SKBitmapControl Width="256" PointerPressed="MetatileSetBitmap_PointerPressed" Height="1024" Name="MetatileSetBitmap"/>
                  </ScrollViewer>
                  <Button Name="AddMetatileButton" Content="+" Width="256" Click="AddMetatileButton_Click"/>
                </StackPanel>
              </HeaderedContentControl>
              <Separator/>
              <!--Selected Metatile-->
              <HeaderedContentControl Header="Selected Metatile">
                <DockPanel>
                  <SKBitmapControl PointerPressed="SelectedMetatileBitmap_PointerPressed" Width="32" Height="32" Name="SelectedMetatileBitmap"/>
                  <StackPanel>
                    <DockPanel>
                      <Label Content="Name: "/>
                      <TextBox Name="MetatileNameTextBox" TextChanged="MetatileNameTextBox_TextChanged" TextAlignment="Right" Padding="5,0,5,0" HorizontalAlignment="Right" MaxWidth="150" MinWidth="100"/>
                    </DockPanel>
                    <DockPanel>
                      <Label Content="Type: " HorizontalAlignment="Left"/>
                      <ComboBox SelectionChanged="MetatileTypeComboBox_SelectionChanged" Name="MetatileTypeComboBox" HorizontalAlignment="Right" MinWidth="100">
                        <ComboBoxItem Content="Air" IsSelected="True"/>
                        <ComboBoxItem Content="Solid"/>
                        <ComboBoxItem Content="SemiSolid"/>
                        <ComboBoxItem Content="Spike"/>
                        <ComboBoxItem Content="Climb"/>
                      </ComboBox>
                    </DockPanel>
                  </StackPanel>
                </DockPanel>
              </HeaderedContentControl>
              <Separator/>
              <HeaderedContentControl Header="CHR">
                <StackPanel>
                  <SKBitmapControl PointerPressed="CHRBitmap_PointerPressed" Width="256" Height="256" Name="CHRBitmap"/>
                  <Button Click="ReplaceCHRButton_Click" Name="ReplaceCHRButton" HorizontalAlignment="Center" Width="100">Replace</Button>
                </StackPanel>
              </HeaderedContentControl>
            </StackPanel>
          </TabItem>
          <TabItem Header="Objects">

          </TabItem>
          <TabItem Header="Entries">
            <StackPanel>
              <HeaderedContentControl Header="Entry list">
                <ListBox SelectionChanged="EntriesListBox_SelectionChanged" Height="300" Name="EntriesListBox" x:CompileBindings="False" ItemsSource="{Binding LevelViewModel.Level.Entries}">
                  <ListBox.ItemTemplate>
                    <DataTemplate>
                      <Border BorderThickness="1" Padding="4" Height="70">
                        <StackPanel Orientation="Horizontal">
                          <TextBlock VerticalAlignment="Center" Text="Entry"/>
                          <Button Click="EntryDeleteButton_Click" HorizontalAlignment="Right">
                            <Button.Content>
                              <PathIcon Height="10" Width="10" Data="{StaticResource delete_regular}"/>
                            </Button.Content>
                          </Button>
                        </StackPanel>
                      </Border>
                    </DataTemplate>
                  </ListBox.ItemTemplate>
                </ListBox>
              </HeaderedContentControl>
              <Button Content="Add Entry" Name="AddEntryButton" Click="AddEntryButton_Click"/>
              <Separator/>
              <DockPanel>

              </DockPanel>
            </StackPanel>
          </TabItem>
        </TabControl>
      </DockPanel>

      <DockPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
        <Label Content="Test" Name="LogsLabel"/>
      </DockPanel>
    </Grid>
  </DockPanel>
</Window>
